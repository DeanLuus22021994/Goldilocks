{
  "$schema": "https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainer.schema.json",
  "name": "Goldilocks DevContainer",
  "dockerComposeFile": "../infrastructure/docker/docker-compose.yml",
  "service": "goldilocks-backend",
  "workspaceFolder": "/workspaces/Goldilocks",
  "remoteUser": "root",

  "overrideCommand": true,

  "customizations": {
    "vscode": {
      "extensions": ["github.copilot", "github.copilot-chat"],
      "settings": {
        "python.defaultInterpreterPath": "/opt/venv/bin/python"
      },
      "mcp": {
        "servers": {
          "playwright": {
            "command": "npx",
            "args": ["-y", "@microsoft/mcp-server-playwright"]
          },
          "docker": {
            "command": "docker",
            "args": ["version"]
          },
          "filesystem": {
            "command": "npx",
            "args": [
              "-y",
              "@microsoft/mcp-server-filesystem",
              "/workspaces/Goldilocks"
            ]
          }
        }
      }
    }
  },

  "forwardPorts": [
    9000, // Flask application
    3306, // MariaDB database
    6379, // Redis cache
    8080, // Adminer database UI
    5555, // Python debugger
    9090 // Application metrics/profiler
  ],
  "shutdownAction": "stopCompose"
}
