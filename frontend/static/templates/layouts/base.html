<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="{% block description %}Goldilocks - Modern Flask Application{% endblock %}"
    />
    <meta
      name="keywords"
      content="{% block keywords %}Flask, Python, Development, API, Modern Web App{% endblock %}"
    />
    <meta name="author" content="Goldilocks Development Team" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="{{ request.url }}" />
    <meta
      property="og:title"
      content="{% block og_title %}Goldilocks Flask App{% endblock %}"
    />
    <meta
      property="og:description"
      content="{% block og_description %}Modern Flask Application with Advanced Development Environment{% endblock %}"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="{{ request.url }}" />
    <meta
      property="twitter:title"
      content="{% block twitter_title %}Goldilocks Flask App{% endblock %}"
    />
    <meta
      property="twitter:description"
      content="{% block twitter_description %}Modern Flask Application with Advanced Development Environment{% endblock %}"
    />

    <title>{% block title %}Goldilocks Flask App{% endblock %}</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg" />

    <!-- Preload critical resources for performance -->
    <link rel="preload" href="/static/css/variables.css" as="style" />
    <link rel="preload" href="/static/css/theme.css" as="style" />
    <link rel="preload" href="/static/css/base.css" as="style" />
    <link rel="preload" href="/static/css/layout.css" as="style" />
    <link rel="preload" href="/static/css/components.css" as="style" />
    <link rel="preload" href="/static/css/header.css" as="style" />
    <link rel="preload" href="/static/css/buttons.css" as="style" />
    <link rel="preload" href="/static/css/utilities.css" as="style" />
    <link rel="preload" href="/static/css/nav.css" as="style" />
    <link rel="preload" href="/static/css/footer.css" as="style" />

    <!-- Load stylesheets -->
    <link rel="stylesheet" href="/static/css/variables.css" />
    <link rel="stylesheet" href="/static/css/theme.css" />
    <link rel="stylesheet" href="/static/css/base.css" />
    <link rel="stylesheet" href="/static/css/layout.css" />
    <link rel="stylesheet" href="/static/css/components.css" />
    <link rel="stylesheet" href="/static/css/header.css" />
    <link rel="stylesheet" href="/static/css/buttons.css" />
    <link rel="stylesheet" href="/static/css/utilities.css" />
    <link rel="stylesheet" href="/static/css/nav.css" />
    <link rel="stylesheet" href="/static/css/footer.css" />

    {% block extra_head %}{% endblock %}
  </head>
  <body>
    {% block header %}
    <!-- Top header bar -->
    <header class="topbar">
      <div class="topbar-inner">
        <div class="left">
          <button class="icon-btn" data-nav-toggle aria-label="Toggle menu">
            <span aria-hidden="true">☰</span>
          </button>
          <strong class="brand"
            >{% block brand %}Goldilocks{% endblock %}</strong
          >
          <span class="small hide-sm">
            Health: <span class="badge" data-health>—</span>
          </span>
        </div>
        <div class="right">
          <button
            class="icon-btn"
            data-toggle-theme
            aria-pressed="false"
            aria-label="Toggle color theme"
          >
            <span aria-hidden="true">🌓</span>
            <span class="hide-sm" data-theme-label>light</span>
          </button>

          {% if current_user and current_user.is_authenticated %}
          <!-- Profile (shown when logged in) -->
          <div class="profile" data-profile>
            <button
              class="icon-btn"
              data-profile-toggle
              aria-haspopup="menu"
              aria-expanded="false"
            >
              <img
                class="avatar"
                src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Ccircle cx='12' cy='8' r='5' fill='%23999'/%3E%3Crect x='4' y='15' width='16' height='7' rx='3' fill='%23999'/%3E%3C/svg%3E"
                alt=""
                width="24"
                height="24"
              />
              <span class="hide-sm" data-profile-name
                >{{ current_user.full_name or current_user.username }}</span
              >
            </button>
            <div class="profile-menu" data-profile-menu role="menu">
              <div class="small muted profile-menu-header">
                Signed in as
                <strong data-profile-name
                  >{{ current_user.full_name or current_user.username }}</strong
                >
              </div>
              <hr />
              <a href="{{ url_for('auth.profile') }}" role="menuitem"
                >Profile</a
              >
              <a href="{{ url_for('auth.dashboard') }}" role="menuitem"
                >Dashboard</a
              >
              <hr />
              <a
                href="{{ url_for('auth.logout') }}"
                role="menuitem"
                data-signout
                >Sign out</a
              >
            </div>
          </div>
          {% else %}
          <!-- Auth links (shown when not logged in) -->
          <div class="auth-links" data-auth-links>
            <a
              href="{{ url_for('auth.login') }}"
              class="btn btn-sm btn-secondary"
              >Login</a
            >
            <a
              href="{{ url_for('auth.register') }}"
              class="btn btn-sm btn-primary"
              >Register</a
            >
          </div>
          {% endif %}
        </div>
      </div>
    </header>
    {% endblock header %}

    <div class="portal" data-portal>
      {% block sidebar %}
      <!-- Sidebar navigation like Azure portal -->
      <aside class="sidebar" data-sidebar>
        <nav class="nav" aria-label="Main">
          <a class="nav-item" href="/">
            <span class="icon" aria-hidden="true">🏠</span>
            <span>Home</span>
          </a>
          <a class="nav-item" href="/health">
            <span class="icon" aria-hidden="true">❤️</span>
            <span>Health</span>
          </a>
          <a class="nav-item" href="/version">
            <span class="icon" aria-hidden="true">🧪</span>
            <span>Version</span>
          </a>
          {% if current_user and current_user.is_authenticated %}
          <a class="nav-item" href="{{ url_for('auth.dashboard') }}">
            <span class="icon" aria-hidden="true">📊</span>
            <span>Dashboard</span>
          </a>
          <a class="nav-item" href="{{ url_for('auth.profile') }}">
            <span class="icon" aria-hidden="true">👤</span>
            <span>Profile</span>
          </a>
          {% endif %} {% block extra_nav %}{% endblock %}
        </nav>
      </aside>
      {% endblock sidebar %}

      <!-- Main content -->
      <main class="content">
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %}
        <div class="flash-messages">
          {% for category, message in messages %}
          <div class="alert alert-{{ category }}" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert">
              &times;
            </button>
          </div>
          {% endfor %}
        </div>
        {% endif %} {% endwith %} {% block content %}{% endblock %}
      </main>
    </div>

    {% block footer %}
    <footer class="site-footer">
      <div class="container">
        <div class="flex items-center justify-between wrap gap-3">
          <span class="muted"
            >© <span data-year></span> {% block copyright %}Goldilocks{%
            endblock %}</span
          >
          <span class="small">
            <a href="/version">Version</a> ·
            <a
              href="https://flask.palletsprojects.com/"
              rel="noreferrer noopener"
              >Flask</a
            >
            {% block footer_links %}{% endblock %}
          </span>
        </div>
      </div>
    </footer>
    {% endblock footer %}

    <script src="/static/js/main.js" defer></script>
    {% block extra_scripts %}{% endblock %}
  </body>
</html>
