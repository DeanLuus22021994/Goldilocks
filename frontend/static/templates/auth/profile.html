{% extends "layouts/admin.html" %} {% block title %}Profile - Goldilocks{%
endblock %} {% block page_title %}Your Profile{% endblock %} {% block content %}
<div class="profile-container">
  <div class="profile-header">
    <div class="profile-avatar">
      <img
        src="{{ user.avatar_url or '/static/images/default-avatar.svg' }}"
        alt="{{ user.full_name or 'User' }}"
        class="avatar-image"
      />
    </div>
    <div class="profile-info">
      <h1 class="profile-name">{{ user.full_name or 'Anonymous User' }}</h1>
      <p class="profile-title">{{ user.job_title or 'Team Member' }}</p>
      <p class="profile-email">{{ user.email }}</p>
    </div>
    <div class="profile-actions">
      <button type="button" class="btn btn--secondary" onclick="editProfile()">
        Edit Profile
      </button>
    </div>
  </div>

  <div class="profile-tabs">
    <nav class="tabs-nav">
      <button class="tab-button active" data-tab="overview">Overview</button>
      <button class="tab-button" data-tab="settings">Settings</button>
      <button class="tab-button" data-tab="activity">Activity</button>
    </nav>

    <div class="tab-content active" id="overview">
      <div class="profile-stats">
        <div class="stat-group">
          <h3>Balance Metrics</h3>
          <div class="metrics-grid">
            <div class="metric-item">
              <span class="metric-label">Current Balance Score</span>
              <span class="metric-value"
                >{{ user.balance_score or '85' }}%</span
              >
            </div>
            <div class="metric-item">
              <span class="metric-label">Days Streak</span>
              <span class="metric-value">{{ user.balance_streak or '7' }}</span>
            </div>
            <div class="metric-item">
              <span class="metric-label">Goals Completed</span>
              <span class="metric-value"
                >{{ user.goals_completed or '12' }}/15</span
              >
            </div>
          </div>
        </div>

        <div class="stat-group">
          <h3>Recent Achievements</h3>
          <div class="achievements-list">
            <div class="achievement-item">
              <span class="achievement-icon">üèÜ</span>
              <div class="achievement-info">
                <h4>Balance Master</h4>
                <p>Maintained optimal balance for 7 consecutive days</p>
              </div>
            </div>
            <div class="achievement-item">
              <span class="achievement-icon">üéØ</span>
              <div class="achievement-info">
                <h4>Goal Setter</h4>
                <p>Created and completed 10 personal goals</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="tab-content" id="settings">
      <form method="POST" action="/auth/profile" class="profile-form">
        {{ form.hidden_tag() }}

        <div class="form-section">
          <h3>Personal Information</h3>
          <div class="form-group">
            <label for="{{ form.full_name.id }}" class="form-label"
              >Full Name</label
            >
            {{ form.full_name(class="form-input", value=user.full_name or '') }}
          </div>

          <div class="form-group">
            <label for="{{ form.email.id }}" class="form-label">Email</label>
            {{ form.email(class="form-input", value=user.email or '') }}
          </div>

          <div class="form-group">
            <label for="{{ form.job_title.id }}" class="form-label"
              >Job Title</label
            >
            {{ form.job_title(class="form-input", value=user.job_title or '',
            placeholder="e.g. Software Engineer") }}
          </div>
        </div>

        <div class="form-section">
          <h3>Preferences</h3>
          <div class="form-group">
            <label class="form-label">Notifications</label>
            <div class="checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" name="email_notifications" checked />
                Email notifications for goals
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="balance_reminders" checked />
                Daily balance reminders
              </label>
            </div>
          </div>
        </div>

        <button type="submit" class="btn btn--primary">Save Changes</button>
      </form>
    </div>

    <div class="tab-content" id="activity">
      <div class="activity-timeline">
        <div class="timeline-item">
          <div class="timeline-marker"></div>
          <div class="timeline-content">
            <h4>Profile Updated</h4>
            <p>Updated job title and notification preferences</p>
            <time>Today, 2:30 PM</time>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-marker"></div>
          <div class="timeline-content">
            <h4>Goal Completed</h4>
            <p>Finished "Complete quarterly project review"</p>
            <time>Yesterday, 4:15 PM</time>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-marker"></div>
          <div class="timeline-content">
            <h4>Balance Score Improved</h4>
            <p>Reached 85% balance score - new personal best!</p>
            <time>2 days ago, 9:00 AM</time>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Tab switching functionality
  document.querySelectorAll(".tab-button").forEach((button) => {
    button.addEventListener("click", () => {
      // Remove active class from all tabs and content
      document
        .querySelectorAll(".tab-button")
        .forEach((btn) => btn.classList.remove("active"));
      document
        .querySelectorAll(".tab-content")
        .forEach((content) => content.classList.remove("active"));

      // Add active class to clicked tab and corresponding content
      button.classList.add("active");
      document.getElementById(button.dataset.tab).classList.add("active");
    });
  });

  function editProfile() {
    // Switch to settings tab
    document.querySelector('[data-tab="settings"]').click();
  }
</script>
{% endblock %}
