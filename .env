# ==============================================================================
# Goldilocks Application Environment Configuration
# HIGH COMPATIBILITY - Local development optimized
# MODERNIZE - Latest Flask and Python best practices
# ==============================================================================

# -----------------------------------------------------------------------------
# Python & Application Runtime
# -----------------------------------------------------------------------------
PYTHONPATH=.;src;/app/src
FLASK_APP=app
FLASK_ENV=development
FLASK_DEBUG=1
FLASK_RUN_HOST=0.0.0.0
FLASK_RUN_PORT=9000

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
SECRET_KEY=dev-secret-key-change-in-production
JWT_SECRET_KEY=jwt-dev-secret-key
SECURITY_PASSWORD_SALT=password-salt-dev
WTF_CSRF_ENABLED=false
WTF_CSRF_TIME_LIMIT=3600

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Primary database (MariaDB for Docker development)
DATABASE_URL=mysql+pymysql://goldilocks_app:goldilocks_app_secure_2024@goldilocks-db:3306/goldilocks?charset=utf8mb4

# Alternative database configurations (uncomment as needed)
# SQLite for local development
# DATABASE_URL=sqlite:///goldilocks.db

# PostgreSQL (for advanced features)
# DATABASE_URL=postgresql+psycopg2://goldilocks_app:goldilocks_app_secure_2024@localhost:5432/goldilocks

# In-memory database (for testing)
# DATABASE_URL=sqlite:///:memory:

# Database Pool Settings
SQLALCHEMY_POOL_SIZE=10
SQLALCHEMY_POOL_TIMEOUT=20
SQLALCHEMY_POOL_RECYCLE=3600
SQLALCHEMY_MAX_OVERFLOW=20
SQLALCHEMY_POOL_PRE_PING=true
SQLALCHEMY_ENGINE_OPTIONS_POOL_PRE_PING=true

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------
API_VERSION=v1
API_PREFIX=/api/v1
API_TITLE=Goldilocks API
API_DESCRIPTION=Modern Python web application following best practices
API_VERSION_STRING=1.0.0

# Rate Limiting
RATELIMIT_STORAGE_URL=redis://localhost:6379/1
RATELIMIT_STRATEGY=fixed-window
RATELIMIT_PER_METHOD=true

# -----------------------------------------------------------------------------
# Cache Configuration
# -----------------------------------------------------------------------------
# Redis (production-ready caching)
CACHE_TYPE=redis
CACHE_REDIS_URL=redis://localhost:6379/0
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=goldilocks:

# Alternative cache backends
# Simple in-memory cache (development only)
# CACHE_TYPE=simple
# CACHE_DEFAULT_TIMEOUT=300

# Filesystem cache (for single-instance deployments)
# CACHE_TYPE=filesystem
# CACHE_DIR=/tmp/goldilocks_cache

# -----------------------------------------------------------------------------
# Session Configuration
# -----------------------------------------------------------------------------
SESSION_TYPE=redis
SESSION_REDIS_URL=redis://localhost:6379/2
SESSION_PERMANENT=false
SESSION_USE_SIGNER=true
SESSION_KEY_PREFIX=goldilocks:session:
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=colored  # 'json' for production, 'colored' for development
LOG_DATE_FORMAT=%Y-%m-%d %H:%M:%S
LOG_FILE_PATH=logs/goldilocks.log
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5

# Request/Response Logging
LOG_REQUESTS=true
LOG_REQUEST_ID=true
LOG_RESPONSE_TIME=true

# -----------------------------------------------------------------------------
# Development Configuration
# -----------------------------------------------------------------------------
DEBUG=1
TESTING=0
DEVELOPMENT=1
HOT_RELOAD=1
TEMPLATES_AUTO_RELOAD=1
SEND_FILE_MAX_AGE_DEFAULT=1

# Development Server Settings
DEV_SERVER_HOST=0.0.0.0
DEV_SERVER_PORT=9000
DEV_SERVER_THREADED=true
DEV_SERVER_PROCESSES=1

# -----------------------------------------------------------------------------
# Email Configuration (Development)
# -----------------------------------------------------------------------------
MAIL_SERVER=localhost
MAIL_PORT=1025  # MailHog or similar local SMTP server
MAIL_USE_TLS=false
MAIL_USE_SSL=false
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_DEFAULT_SENDER=noreply@goldilocks.local
MAIL_MAX_EMAILS=10
MAIL_SUPPRESS_SEND=false

# -----------------------------------------------------------------------------
# File Upload Configuration
# -----------------------------------------------------------------------------
UPLOAD_FOLDER=uploads
MAX_CONTENT_LENGTH=16777216  # 16MB
ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,pdf,txt,csv,xlsx,json

# -----------------------------------------------------------------------------
# Static Files & Assets
# -----------------------------------------------------------------------------
STATIC_FOLDER=frontend/static
STATIC_URL_PATH=/static
TEMPLATES_FOLDER=frontend/templates

# Frontend Build Settings (if using build tools)
ASSETS_DEBUG=true
ASSETS_AUTO_BUILD=true

# -----------------------------------------------------------------------------
# Monitoring & Performance
# -----------------------------------------------------------------------------
# Application Performance Monitoring
ENABLE_PROFILER=false
PROFILER_DIR=profiler_data
ENABLE_QUERY_PROFILER=false

# Metrics Collection
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_CACHE=true

# -----------------------------------------------------------------------------
# Testing Configuration
# -----------------------------------------------------------------------------
TEST_DATABASE_URL=sqlite:///:memory:
TEST_CACHE_TYPE=simple
TEST_WTF_CSRF_ENABLED=false
TEST_MAIL_SUPPRESS_SEND=true
TEST_LOGIN_DISABLED=false

# Pytest Configuration
PYTEST_TIMEOUT=30
PYTEST_MAXFAIL=5
PYTEST_VERBOSE=1

# -----------------------------------------------------------------------------
# Security Headers & CORS
# -----------------------------------------------------------------------------
# CORS Settings
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:9000
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOW_HEADERS=Content-Type,Authorization,X-Request-ID,X-CSRF-Token
CORS_EXPOSE_HEADERS=X-Request-ID,X-Response-Time
CORS_SUPPORTS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Content Security Policy
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https:
CSP_FONT_SRC='self' https:

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=false
FEATURE_SOCIAL_LOGIN=false
FEATURE_API_DOCS=true
FEATURE_ADMIN_PANEL=true
FEATURE_METRICS_DASHBOARD=false

# -----------------------------------------------------------------------------
# Compatibility Notes
# -----------------------------------------------------------------------------
# - Variables support multiple database backends
# - Cache system can switch between Redis, Memcached, and in-memory
# - Session storage supports Redis, filesystem, and secure cookies
# - Logging supports both structured (JSON) and colored console output
# - Email system supports SMTP, SendGrid, SES, and local development servers
# - File uploads support local filesystem and cloud storage adapters
# - All settings can be overridden by Docker environment or system environment
