{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Run Flask (port 9000)",
      "type": "shell",
      "command": "flask --app app run --host 0.0.0.0 --port 9000 --no-debugger --no-reload",
      "options": { "env": { "FLASK_APP": "app.py" } },
      "problemMatcher": []
    },
    {
      "label": "Test: pytest",
      "type": "shell",
      "command": "pytest -q",
      "problemMatcher": []
    },
    {
      "label": "Test: watch (looponfail)",
      "type": "shell",
      "command": "pytest -q -f",
      "detail": "Requires pytest-xdist; reruns tests on file changes.",
      "problemMatcher": []
    },
    {
      "label": "Coverage",
      "type": "shell",
      "command": "pytest -q --cov=goldilocks --cov-report=term-missing --cov-report=xml",
      "problemMatcher": []
    },
    {
      "label": "Type check (mypy)",
      "type": "shell",
      "command": "mypy .",
      "problemMatcher": []
    },
    {
      "label": "Pre-commit (all files)",
      "type": "shell",
      "command": "pre-commit run --all-files",
      "problemMatcher": []
    },
    {
      "label": "DevContainer: Build Benchmark",
      "type": "shell",
      "command": "bash .benchmarks/devcontainer-build-benchmark.sh",
      "detail": "Run devcontainer build benchmark with progress output",
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "problemMatcher": []
    },
    {
      "label": "DevContainer: Build Benchmark (JSON only)",
      "type": "shell",
      "command": "bash .benchmarks/devcontainer-build-benchmark.sh > .benchmarks/latest_benchmark.json && echo 'JSON output saved to .benchmarks/latest_benchmark.json' && cat .benchmarks/latest_benchmark.json",
      "detail": "Run devcontainer build benchmark and save JSON output to file",
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "problemMatcher": []
    }
  ]
}
