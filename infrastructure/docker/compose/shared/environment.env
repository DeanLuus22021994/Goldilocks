# ==============================================================================
# Goldilocks Shared Environment Configuration
# STRUCTURED - Centralized environment variable definitions
# STANDARDIZATION - Consistent naming and default values
# HIGH COMPATIBILITY - Support for different deployment environments
# ==============================================================================

# This file defines shared environment variables that can be used across
# different services and environments. Use with Docker Compose's env_file directive.

# =============================================================================
# Application Configuration
# =============================================================================

# Application Metadata
APP_NAME=goldilocks
APP_VERSION=2.0.0
APP_DESCRIPTION=Modern Python Web Application
APP_AUTHOR=Goldilocks Development Team
APP_LICENSE=MIT

# Environment Classification
ENVIRONMENT=production
DEPLOYMENT_STAGE=stable
BUILD_DATE=2025-09-25
BUILD_VERSION=2.0.0

# =============================================================================
# Python Runtime Configuration
# =============================================================================

# Python Optimization
PYTHONPATH=/app/src
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1
PYTHONOPTIMIZE=2
PYTHONHASHSEED=random
PYTHONIOENCODING=utf-8
PYTHONUTF8=1

# Python Performance Tuning
PYTHON_GC_THRESHOLD_0=700
PYTHON_GC_THRESHOLD_1=10
PYTHON_GC_THRESHOLD_2=10

# =============================================================================
# Flask Application Configuration
# =============================================================================

# Flask Core Settings
FLASK_APP=goldilocks.app
FLASK_ENV=production
FLASK_DEBUG=0
FLASK_SKIP_DOTENV=1

# Flask Performance
FLASK_PERMANENT_SESSION_LIFETIME=86400
FLASK_MAX_CONTENT_LENGTH=16777216
FLASK_SEND_FILE_MAX_AGE_DEFAULT=31536000

# =============================================================================
# Database Configuration
# =============================================================================

# Database Connection Settings
DB_ENGINE=mariadb
DB_HOST=goldilocks-db
DB_PORT=3306
DB_NAME=goldilocks
DB_USER=goldilocks_app
DB_CHARSET=utf8mb4
DB_COLLATION=utf8mb4_unicode_ci

# Database Pool Configuration
DB_POOL_SIZE=20
DB_POOL_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_POOL_PRE_PING=true

# Database Performance Tuning
DB_QUERY_TIMEOUT=30
DB_CONNECTION_TIMEOUT=10
DB_ECHO_QUERIES=false

# =============================================================================
# Cache Configuration
# =============================================================================

# Redis Configuration
REDIS_HOST=goldilocks-redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# Cache Settings
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=goldilocks:
CACHE_IGNORE_ERRORS=true

# Session Configuration
SESSION_TYPE=redis
SESSION_PERMANENT=false
SESSION_USE_SIGNER=true
SESSION_KEY_PREFIX=goldilocks:session:
SESSION_COOKIE_NAME=goldilocks_session
SESSION_COOKIE_DOMAIN=
SESSION_COOKIE_PATH=/
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_SAMESITE=Lax

# =============================================================================
# Security Configuration
# =============================================================================

# CSRF Protection
WTF_CSRF_ENABLED=true
WTF_CSRF_TIME_LIMIT=3600
WTF_CSRF_TOKEN_KEY=csrf_token
WTF_CSRF_FIELD_NAME=csrf_token

# Password Hashing
BCRYPT_LOG_ROUNDS=12
ARGON2_MEMORY_COST=65536
ARGON2_TIME_COST=3
ARGON2_PARALLELISM=4

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRES=900
JWT_REFRESH_TOKEN_EXPIRES=2592000
JWT_BLACKLIST_ENABLED=true
JWT_BLACKLIST_TOKEN_CHECKS=access,refresh

# Rate Limiting
RATELIMIT_STRATEGY=fixed-window
RATELIMIT_STORAGE_URL=redis://goldilocks-redis:6379/1
RATELIMIT_PER_METHOD=true
RATELIMIT_HEADERS_ENABLED=true

# =============================================================================
# Logging Configuration
# =============================================================================

# Log Levels and Formats
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_DATE_FORMAT=%Y-%m-%dT%H:%M:%S%z
LOG_FILE_MAX_BYTES=10485760
LOG_FILE_BACKUP_COUNT=5
LOG_ENABLE_COLORS=false

# Request Logging
LOG_REQUESTS=true
LOG_REQUEST_ID=true
LOG_RESPONSE_TIME=true
LOG_USER_AGENT=true
LOG_IP_ADDRESS=true

# Database Query Logging
LOG_DB_QUERIES=false
LOG_SLOW_QUERIES=true
LOG_SLOW_QUERY_THRESHOLD=1.0

# =============================================================================
# Email Configuration
# =============================================================================

# SMTP Settings
MAIL_SERVER=localhost
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USE_SSL=false
MAIL_USERNAME=
MAIL_DEFAULT_SENDER=noreply@goldilocks.local
MAIL_MAX_EMAILS=100
MAIL_SUPPRESS_SEND=false
MAIL_ASCII_ATTACHMENTS=false

# Email Templates
MAIL_TEMPLATE_FOLDER=templates/email
MAIL_SUBJECT_PREFIX=[Goldilocks]

# =============================================================================
# File Upload Configuration
# =============================================================================

# Upload Settings
UPLOAD_FOLDER=/app/uploads
UPLOAD_MAX_FILE_SIZE=16777216
UPLOAD_ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,pdf,txt,csv,xlsx,json
UPLOAD_REQUIRE_AUTH=true
UPLOAD_SCAN_VIRUSES=false

# File Storage
STATIC_FOLDER=/app/frontend/static
STATIC_URL_PATH=/static
MEDIA_FOLDER=/app/media
MEDIA_URL_PATH=/media

# =============================================================================
# API Configuration
# =============================================================================

# API Settings
API_VERSION=v1
API_PREFIX=/api/v1
API_TITLE=Goldilocks API
API_DESCRIPTION=Modern Python Web Application API
API_VERSION_STRING=2.0.0
API_CONTACT_NAME=Goldilocks Team
API_CONTACT_EMAIL=api@goldilocks.local
API_LICENSE_NAME=MIT
API_LICENSE_URL=https://opensource.org/licenses/MIT

# API Rate Limiting
API_RATE_LIMIT=100/hour
API_BURST_RATE_LIMIT=10/minute
API_PAGE_SIZE=50
API_MAX_PAGE_SIZE=500

# API Documentation
API_DOCS_ENABLED=true
API_REDOC_ENABLED=true
API_OPENAPI_VERSION=3.0.3

# =============================================================================
# Monitoring and Observability Configuration
# =============================================================================

# Application Metrics
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_PATH=/metrics
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_CACHE=true
HEALTH_CHECK_EXTERNAL_SERVICES=true

# Distributed Tracing
JAEGER_ENABLED=false
JAEGER_SERVICE_NAME=goldilocks
JAEGER_COLLECTOR_ENDPOINT=http://jaeger:14268/api/traces

# Error Tracking
SENTRY_ENABLED=false
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# Development and Testing Configuration
# =============================================================================

# Development Settings
TEMPLATES_AUTO_RELOAD=false
EXPLAIN_TEMPLATE_LOADING=false
SEND_FILE_MAX_AGE_DEFAULT=31536000

# Testing Configuration
TESTING=false
TEST_DATABASE_URL=sqlite:///:memory:
TEST_CACHE_TYPE=simple
TEST_MAIL_SUPPRESS_SEND=true

# =============================================================================
# Infrastructure Configuration
# =============================================================================

# Container Configuration
CONTAINER_USER=app
CONTAINER_GROUP=app
CONTAINER_UID=1000
CONTAINER_GID=1000

# Resource Limits (used by deployment tools)
MEMORY_LIMIT=512m
CPU_LIMIT=1.0
MEMORY_REQUEST=256m
CPU_REQUEST=0.5

# Health Check Configuration
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=3
HEALTHCHECK_START_PERIOD=40s

# =============================================================================
# External Service Integration
# =============================================================================

# Third-party Services
EXTERNAL_API_TIMEOUT=30
EXTERNAL_API_RETRIES=3
EXTERNAL_API_BACKOFF_FACTOR=2

# OAuth Configuration
OAUTH_GOOGLE_ENABLED=false
OAUTH_GITHUB_ENABLED=false
OAUTH_MICROSOFT_ENABLED=false

# Content Delivery Network
CDN_ENABLED=false
CDN_URL=
CDN_STATIC_FILES=true

# =============================================================================
# Feature Flags
# =============================================================================

# Application Features
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_SOCIAL_LOGIN=false
FEATURE_TWO_FACTOR_AUTH=false
FEATURE_API_DOCS=true
FEATURE_ADMIN_PANEL=true
FEATURE_METRICS_DASHBOARD=true
FEATURE_FILE_UPLOAD=true
FEATURE_REAL_TIME_NOTIFICATIONS=false

# Development Features
FEATURE_DEBUG_TOOLBAR=false
FEATURE_PROFILER=false
FEATURE_QUERY_PROFILER=false
