# ==============================================================================
# Goldilocks Shared Application Environment Configuration
# STRUCTURED - Application runtime environment variables only
# STANDARDIZATION - Consistent application settings across services
# HIGH COMPATIBILITY - Support for different deployment environments
# ==============================================================================

# This file defines application runtime environment variables that are used
# by the application containers. Use with Docker Compose's env_file directive.

# =============================================================================
# Application Metadata
# =============================================================================
APP_NAME=goldilocks
APP_DESCRIPTION=Modern Python Web Application
APP_AUTHOR=Goldilocks Development Team
APP_LICENSE=MIT

# Environment Classification
DEPLOYMENT_STAGE=stable
BUILD_DATE=2025-09-25

# =============================================================================
# Flask Application Configuration
# =============================================================================
# Flask Core Settings - defaults for development
FLASK_APP=src.goldilocks.app
FLASK_ENV=development
FLASK_DEBUG=1
FLASK_SKIP_DOTENV=1

# Flask Performance
FLASK_PERMANENT_SESSION_LIFETIME=86400
FLASK_MAX_CONTENT_LENGTH=16777216
FLASK_SEND_FILE_MAX_AGE_DEFAULT=31536000
TEMPLATES_AUTO_RELOAD=true
SEND_FILE_MAX_AGE_DEFAULT=1

# =============================================================================
# Python Runtime Configuration
# =============================================================================
# Python Environment
PYTHONPATH=/workspaces/Goldilocks/src
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=0
PYTHONOPTIMIZE=0
PYTHONHASHSEED=random
PYTHONIOENCODING=utf-8
PYTHONUTF8=1

# Python Performance Tuning
PYTHON_GC_THRESHOLD_0=700
PYTHON_GC_THRESHOLD_1=10
PYTHON_GC_THRESHOLD_2=10

# =============================================================================
# Database Application Configuration (Runtime URLs)
# =============================================================================
# Database Connection URLs (constructed from compose variables)
DATABASE_URL=mysql+pymysql://${MARIADB_USER}:${MARIADB_PASSWORD}@goldilocks-db:3306/${MARIADB_DATABASE}?charset=utf8mb4
DATABASE_REPLICA_URL=mysql+pymysql://${MARIADB_USER}:${MARIADB_PASSWORD}@goldilocks-db-replica:3306/${MARIADB_DATABASE}?charset=utf8mb4

# Database Connection Settings
DB_HOST=goldilocks-db
DB_PORT=3306
DB_CHARSET=utf8mb4
DB_COLLATION=utf8mb4_unicode_ci

# Database Pool Configuration
DB_POOL_SIZE=20
DB_POOL_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_POOL_PRE_PING=true
DB_QUERY_TIMEOUT=30
DB_CONNECTION_TIMEOUT=10
DB_ECHO_QUERIES=false

# =============================================================================
# Cache & Session Configuration
# =============================================================================
# Redis Configuration
REDIS_HOST=goldilocks-redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# Cache Settings
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=goldilocks:
CACHE_IGNORE_ERRORS=true

# Session Configuration
SESSION_TYPE=redis
SESSION_PERMANENT=false
SESSION_USE_SIGNER=true
SESSION_KEY_PREFIX=goldilocks:session:
SESSION_COOKIE_NAME=goldilocks_session
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SECURE=false  # Set to true in production
SESSION_COOKIE_SAMESITE=Lax

# =============================================================================
# Security Configuration
# =============================================================================
# Development Security Settings
SECRET_KEY=dev-secret-key-change-in-production
JWT_SECRET_KEY=jwt-secret-key-change-in-production
CSRF_SECRET_KEY=csrf-secret-key-change-in-production

# CSRF Protection
WTF_CSRF_ENABLED=false  # Disabled for development
WTF_CSRF_TIME_LIMIT=3600

# Password Hashing
BCRYPT_LOG_ROUNDS=12

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRES=900
JWT_REFRESH_TOKEN_EXPIRES=2592000

# =============================================================================
# Logging Configuration
# =============================================================================
# Development Logging Settings
LOG_LEVEL=DEBUG
LOG_FORMAT=colored
LOG_DATE_FORMAT=%Y-%m-%dT%H:%M:%S%z
LOG_REQUESTS=true
LOG_REQUEST_ID=true
LOG_RESPONSE_TIME=true

# Database Query Logging (development)
LOG_DB_QUERIES=true
LOG_SLOW_QUERIES=true
LOG_SLOW_QUERY_THRESHOLD=1.0

# =============================================================================
# API Configuration
# =============================================================================
# API Settings
API_VERSION=v1
API_PREFIX=/api/v1
API_TITLE=Goldilocks API
API_DESCRIPTION=Modern Python Web Application API
API_CONTACT_EMAIL=api@goldilocks.local
API_LICENSE_NAME=MIT

# API Pagination
API_PAGE_SIZE=50
API_MAX_PAGE_SIZE=500

# API Documentation (development)
API_DOCS_ENABLED=true
API_REDOC_ENABLED=true

# =============================================================================
# File Upload Configuration
# =============================================================================
# Upload Settings
UPLOAD_FOLDER=/workspaces/Goldilocks/uploads
UPLOAD_MAX_FILE_SIZE=16777216
UPLOAD_ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,pdf,txt,csv,xlsx,json
UPLOAD_REQUIRE_AUTH=true

# Static File Settings
STATIC_FOLDER=/workspaces/Goldilocks/frontend/static
STATIC_URL_PATH=/static
MEDIA_FOLDER=/workspaces/Goldilocks/media
MEDIA_URL_PATH=/media

# =============================================================================
# Development & Debugging Configuration
# =============================================================================
# Development Features
DEBUG=1
TESTING=0
ENABLE_PROFILER=true
ENABLE_QUERY_PROFILER=true
HOT_RELOAD=1

# Development Email (mailhog or similar)
MAIL_SERVER=localhost
MAIL_PORT=1025
MAIL_USE_TLS=false
MAIL_USERNAME=
MAIL_DEFAULT_SENDER=noreply@goldilocks.local

# =============================================================================
# Application Feature Flags (Development)
# =============================================================================
# Core Features
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=false  # Disabled for dev
FEATURE_API_DOCS=true
FEATURE_ADMIN_PANEL=true
FEATURE_FILE_UPLOAD=true

# Development Features
FEATURE_DEBUG_TOOLBAR=true
FEATURE_PROFILER=true
FEATURE_QUERY_PROFILER=true
